window.__require=function t(e,i,o){function n(s,r){if(!i[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var d="function"==typeof __require&&__require;if(!r&&d)return d(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var p=i[s]={exports:{}};e[s][0].call(p.exports,function(t){return n(e[s][1][t]||t)},p,p.exports,t,e,i,o)}return i[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({AudioEngine:[function(t,e){"use strict";cc._RF.push(e,"af80eQ9h4RGvIEc74tboLuW","AudioEngine"),cc.Class({extends:cc.Component,properties:{wing:{default:null,type:cc.AudioClip},hit:{default:null,type:cc.AudioClip},die:{default:null,type:cc.AudioClip},point:{default:null,type:cc.AudioClip}},play:function(t,e,i){cc.audioEngine.play(this[t],e,i)}}),cc._RF.pop()},{}],BirdControl:[function(t,e){"use strict";cc._RF.push(e,"ba696grR4dBHa1I/cynb6GY","BirdControl");var i=t("Global");cc.Class({extends:cc.Component,properties:{jumpForce:250,turnAngle:45,scoreDisplay:cc.Node},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(),cc.director.getCollisionManager().enabled=!0},start:function(){this._rigidBody=this.getComponent("cc.RigidBody"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.find("Canvas").on("mousedown",this.onPlayerAction,this),cc.find("Canvas").on("touchstart",this.onTouchStart,this),cc.find("Canvas").on("touchend",this.onTouchEnd,this),this.audioEngine=this.getComponent("AudioEngine"),this._pressed=!1,this._touched=!1,this._originalPos=new cc.Vec2(this.node.x,this.node.y),this._playedDieSound=!1},restartBird:function(){this.node.x=this._originalPos.x,this.node.y=this._originalPos.y,this.node.rotation=0,this._rigidBody.linearVelocity=cc.v2(),this.getComponent("cc.Animation").start(),cc.find("Canvas/PipeLayer").removeAllChildren(),i.gameLost=!1,i.gameStarted=!1,this._playedDieSound=!1,this._pressed=!1,cc.director.getPhysicsManager().enabled=!0,i.score=0,this.scoreDisplay.getComponent("ScoreDisplay").clearScore(),this.scoreDisplay.getComponent("ScoreDisplay").refreshScore(i.score)},onTouchStart:function(){this._touched||(this._touched=!0,this.onPlayerAction())},onTouchEnd:function(){this._touched=!1},onKeyDown:function(t){switch(t.keyCode){case 32:if(this._pressed)return;this._pressed=!0,this.onPlayerAction()}},onKeyUp:function(){this._pressed=!1},onPlayerAction:function(){this.startGame(),this.jump()},onCollisionEnter:function(t){switch(t.tag){case 0:case 1:case 2:if(0==t.tag&&(cc.director.getPhysicsManager().enabled=!1),i.gameLost)break;var e=cc.find("Canvas/GameOver");e.y+=50,cc.tween(e).to(.5,{opacity:255,y:e.y-50}).start(),cc.tween(cc.find("Canvas/GameOver/btn_playAgain")).delay(1).to(.5,{opacity:255}).start(),i.gameLost=!0,this.getComponent("cc.Animation").stop();break;case 3:if(i.gameLost)break;i.score+=1,this.scoreDisplay.getComponent("ScoreDisplay").refreshScore(i.score),this.audioEngine.play("point",!1,1)}i.gameLost&&!this._playedDieSound&&(this.audioEngine.play("hit",!1,1),this.audioEngine.play("die",!1,1),this._playedDieSound=!0)},startGame:function(){if(!i.gameStarted){cc.director.getPhysicsManager().gravity=cc.v2(0,-450),i.gameStarted=!0;var t=cc.find("Canvas/Title");cc.tween(t).to(.5,{opacity:0}).start(),cc.tween(this.scoreDisplay).to(.5,{opacity:255}).start()}},jump:function(){i.gameLost||(this.audioEngine.play("wing",!1,1),this._rigidBody.linearVelocity=new cc.Vec2(0,this.jumpForce))},update:function(){if(i.gameStarted){var t=this._rigidBody.linearVelocity.y,e=Math.min(Math.max(t,-this.jumpForce),this.jumpForce)/this.jumpForce;this.node.rotation=e*-this.turnAngle}}}),cc._RF.pop()},{Global:"Global"}],Global:[function(t,e){"use strict";cc._RF.push(e,"ac0c78M1YNOpoKrcKbcDIJt","Global"),e.exports={gameStarted:!1,gameLost:!1,spawnPipeTime:100,score:0},cc._RF.pop()},{}],GroundControl:[function(t,e){"use strict";cc._RF.push(e,"84b72p7ua1E2ZthDNJoSACX","GroundControl");var i=t("Global");cc.Class({extends:cc.Component,properties:{moveSpeed:-50},onLoad:function(){},start:function(){this._ground1=this.node.getChildByName("Ground1").getComponent(cc.Sprite),this._ground2=this.node.getChildByName("Ground2").getComponent(cc.Sprite)},update:function(t){i.gameLost||(this._ground1.node.x+=this.moveSpeed*t,this._ground2.node.x+=this.moveSpeed*t,this._ground1.node.x+this._ground1.node.width<=0&&(this._ground1.node.x=this._ground2.node.x+this._ground2.node.width),this._ground2.node.x+this._ground2.node.width<=0&&(this._ground2.node.x=this._ground1.node.x+this._ground1.node.width))}}),cc._RF.pop()},{Global:"Global"}],PipeControl:[function(t,e){"use strict";cc._RF.push(e,"33301ySUNNEGr7h1RJQk0Py","PipeControl");var i=t("Global");cc.Class({extends:cc.Component,properties:{moveSpeed:-100},start:function(){this._upwardPipe=this.node.getChildByName("Pipe Upward"),this._downwardPipe=this.node.getChildByName("Pipe Downward")},update:function(t){i.gameLost||(this._upwardPipe.x+=this.moveSpeed*t,this._downwardPipe.x+=this.moveSpeed*t)}}),cc._RF.pop()},{Global:"Global"}],PipeSpawner:[function(t,e){"use strict";cc._RF.push(e,"3f2c40gQq1CyJBZmpGfqY+t","PipeSpawner");var i=t("Global");cc.Class({extends:cc.Component,properties:{pipePrefab:{default:null,type:cc.Prefab},maxSpacing:200},start:function(){this._frameCount=0},spawnPipes:function(){var t=cc.instantiate(this.pipePrefab),e=t.getChildByName("Pipe Downward"),i=t.getChildByName("Pipe Upward"),o=-this.maxSpacing/2+Math.floor(Math.random()*this.maxSpacing);i.x=500,e.x=500,i.y+=o,e.y+=o,this.node.addChild(t)},update:function(){i.gameStarted&&(i.gameLost||(this._frameCount+=1,this._frameCount==i.spawnPipeTime&&(this.spawnPipes(),this._frameCount=0)))}}),cc._RF.pop()},{Global:"Global"}],PlayAgainBtnControl:[function(t,e){"use strict";cc._RF.push(e,"683b7bWnoRJEZ3ja38V4YHV","PlayAgainBtnControl"),cc.Class({extends:cc.Component,properties:{},start:function(){},onBtnPlayAgainClick:function(){if(!(this.node.opacity<200)){var t=cc.find("Canvas/Bird").getComponent("BirdControl");cc.tween(this.node).to(.5,{opacity:0}).start(),cc.tween(this.node.parent).to(.5,{opacity:0}).start(),t.restartBird()}}}),cc._RF.pop()},{}],ScoreDisplay:[function(t,e){"use strict";cc._RF.push(e,"d7dfdLvBdNH4bjGmu52TcUt","ScoreDisplay");var i=t("Global");cc.Class({extends:cc.Component,properties:{scoreSpriteFrames:[cc.SpriteFrame],maxScoreDigits:3},start:function(){this._digitNodes=[];for(var t=0;t<this.maxScoreDigits;t++){var e=new cc.Node("Digit Sprite "+t);e.addComponent(cc.Sprite),e.parent=this.node,this._digitNodes.push(e)}this.refreshScore(i.score)},clearScore:function(){for(var t=0;t<this.maxScoreDigits;t++)this._digitNodes[t].getComponent(cc.Sprite).spriteFrame=null},refreshScore:function(t){var e=0==t?1:Math.floor(Math.log10(t))+1;t=String(t);for(var i=this.scoreSpriteFrames[0].getOriginalSize().width,o=-(i*e+1*(e-1))/2,n=0;n<e;n++){var c=this._digitNodes[n];c.x=o+(i+1)*n,c.getComponent(cc.Sprite).spriteFrame=this.scoreSpriteFrames[Number(t[n])]}}}),cc._RF.pop()},{Global:"Global"}]},{},["AudioEngine","BirdControl","Global","GroundControl","PipeControl","PipeSpawner","PlayAgainBtnControl","ScoreDisplay"]);